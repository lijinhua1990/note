powerplant中的消息处理

今天基本明白了powerplant中的LCommander和LListener/LBoradcaster。

LCommander用来逐级处理命令，每个LCommander实例都有一个mSuperCommander的指针指向其父级对象，最上层的LCommander实例的mSuperCommander指针为空。每个LCommander 对象(比如自己从LCommander和其它类继承下来的类)构造或者调用SetSuperCommander都可以把自己挂到父LCommander类里，当然父类也可以用AddSubCommander主动地添加下级的LCommander对象。这样当下级的LCommander对象调用ProcessCommand发送一个消息，父类对象就可以在ObeyCommand里接收并处理。注意，只有直接父类才可以处理这个消息。

而LListener/LBroadcaster采用了一种更灵活的方式，就是不再分成父子关系，只要是继承自LBroadcaster的类都可以使用BroadcastMessage发送消息出去，只要是继承自LListener的类都可以通过ListenToMessage接收消息并处理。但要注意，并不是发送一个消息之后所有的类的ListenToMessage都会处理这个消息，只有调用LBroadcaster类的AddListener或LListener类的AddBroadcaster将继承自LBroadcaster的类加到Listener类的监听队列中，ListenToMessage才会处理，也即ListenToMessage只处理当前对象的监听队列的消息。

